# 项目目录结构

## 总体架构

```
minigame-server/
├── admin-service/          # 管理后台服务 (端口8080)
├── game-service/           # 游戏SDK服务 (端口8081)  
├── migration-tools/        # 数据迁移工具
├── scripts/               # 编译和部署脚本
├── docs/                  # 项目文档
└── go-admin/              # 需求文档目录
```

## 管理后台服务 (admin-service)

```
admin-service/
├── main.go                    # 程序入口
├── go.mod                     # Go模块文件
├── go.sum                     # 依赖包校验文件
├── conf/                      # 配置文件目录
│   ├── app.conf              # Beego配置文件
│   └── mysql.conf            # 数据库配置
├── controllers/               # 控制器层
│   ├── admin.go              # 管理员控制器
│   ├── app.go                # 应用管理控制器
│   ├── config.go             # 配置管理控制器
│   ├── mail.go               # 邮件管理控制器
│   ├── leaderboard.go        # 排行榜管理控制器
│   ├── counter.go            # 计数器管理控制器
│   └── stats.go              # 统计数据控制器
├── models/                    # 数据模型层
│   ├── admin_user.go         # 管理员模型
│   ├── admin_role.go         # 角色模型
│   ├── admin_operation_log.go # 操作日志模型
│   ├── application.go        # 应用模型
│   ├── game_config.go        # 游戏配置模型
│   └── base.go               # 基础模型
├── services/                  # 业务逻辑层
│   ├── admin_service.go      # 管理员服务
│   ├── app_service.go        # 应用服务
│   ├── config_service.go     # 配置服务
│   ├── mail_service.go       # 邮件服务
│   └── stats_service.go      # 统计服务
├── routers/                   # 路由配置
│   └── router.go             # 路由定义
├── middlewares/               # 中间件
│   ├── auth.go               # 认证中间件
│   ├── cors.go               # 跨域中间件
│   ├── log.go                # 日志中间件
│   └── rate_limit.go         # 限流中间件
├── utils/                     # 工具函数
│   ├── crypto.go             # 加密工具
│   ├── response.go           # 响应工具
│   ├── validator.go          # 参数验证
│   └── database.go           # 数据库工具
├── static/                    # 静态文件
│   ├── install/              # 安装页面
│   └── assets/               # 静态资源
├── logs/                      # 日志文件目录
├── tests/                     # 测试文件
│   ├── controllers/          # 控制器测试
│   ├── services/             # 服务测试
│   └── utils/                # 工具测试
└── install/                   # 安装相关
    ├── install.go            # 安装控制器
    └── templates/            # 安装页面模板
```

## 游戏SDK服务 (game-service)

```
game-service/
├── main.go                    # 程序入口
├── go.mod                     # Go模块文件
├── go.sum                     # 依赖包校验文件
├── conf/                      # 配置文件目录
│   ├── app.conf              # Beego配置文件
│   └── mysql.conf            # 数据库配置
├── controllers/               # 控制器层
│   ├── user.go               # 用户控制器
│   ├── auth.go               # 登录控制器
│   ├── data.go               # 数据存储控制器
│   ├── leaderboard.go        # 排行榜控制器
│   ├── counter.go            # 计数器控制器
│   ├── mail.go               # 邮件控制器
│   ├── config.go             # 配置控制器
│   └── app_init.go           # 应用初始化控制器
├── models/                    # 数据模型层
│   ├── user_data.go          # 用户数据模型
│   ├── leaderboard.go        # 排行榜模型
│   ├── counter.go            # 计数器模型
│   ├── mail.go               # 邮件模型
│   ├── game_config.go        # 游戏配置模型
│   └── dynamic_table.go      # 动态表管理
├── services/                  # 业务逻辑层
│   ├── user_service.go       # 用户服务
│   ├── auth_service.go       # 认证服务
│   ├── data_service.go       # 数据服务
│   ├── leaderboard_service.go # 排行榜服务
│   ├── counter_service.go    # 计数器服务
│   ├── mail_service.go       # 邮件服务
│   └── config_service.go     # 配置服务
├── routers/                   # 路由配置
│   └── router.go             # 路由定义
├── middlewares/               # 中间件
│   ├── auth.go               # 认证中间件
│   ├── app_auth.go           # 应用认证中间件
│   ├── cors.go               # 跨域中间件
│   ├── log.go                # 日志中间件
│   └── rate_limit.go         # 限流中间件
├── utils/                     # 工具函数
│   ├── crypto.go             # 加密工具
│   ├── response.go           # 响应工具
│   ├── validator.go          # 参数验证
│   ├── database.go           # 数据库工具
│   └── table_manager.go      # 动态表管理
├── logs/                      # 日志文件目录
└── tests/                     # 测试文件
    ├── controllers/          # 控制器测试
    ├── services/             # 服务测试
    └── utils/                # 工具测试
```

## 数据迁移工具 (migration-tools)

```
migration-tools/
├── main.go                    # 迁移工具入口
├── go.mod                     # Go模块文件
├── config/                    # 配置文件
│   └── migration.yaml        # 迁移配置
├── migrators/                 # 迁移器
│   ├── admin_migrator.go     # 管理员数据迁移
│   ├── user_migrator.go      # 用户数据迁移
│   ├── leaderboard_migrator.go # 排行榜数据迁移
│   ├── counter_migrator.go   # 计数器数据迁移
│   └── mail_migrator.go      # 邮件数据迁移
├── utils/                     # 工具函数
│   ├── mongo_client.go       # MongoDB客户端
│   ├── mysql_client.go       # MySQL客户端
│   ├── data_converter.go     # 数据转换器
│   └── validator.go          # 数据验证器
└── reports/                   # 迁移报告
    └── migration_report.go   # 报告生成器
```

## 脚本目录 (scripts)

```
scripts/
├── build.sh                  # 编译脚本
├── deploy.sh                 # 部署脚本
├── start.sh                  # 启动脚本
├── stop.sh                   # 停止脚本
├── restart.sh                # 重启脚本
├── backup.sh                 # 备份脚本
├── systemd/                  # Systemd服务文件
│   ├── admin-service.service # 管理服务的systemd配置
│   └── game-service.service  # 游戏服务的systemd配置
└── sql/                      # SQL脚本
    ├── init.sql              # 数据库初始化脚本
    ├── tables.sql            # 表结构脚本
    └── seed.sql              # 初始数据脚本
```

## 文档目录 (docs)

```
docs/
├── API.md                    # API接口文档
├── INSTALL.md                # 安装部署文档
├── DEVELOPMENT.md            # 开发文档
├── MIGRATION.md              # 数据迁移文档
└── CHANGELOG.md              # 更新日志
```

## 关键文件说明

### 1. Go模块配置
- `go.mod`: 定义模块名称和依赖包
- `go.sum`: 依赖包的校验和

### 2. Beego配置
- `conf/app.conf`: 服务端口、运行模式、数据库连接等配置

### 3. 数据库配置
- MySQL连接配置
- Redis连接配置
- 连接池参数

### 4. 日志配置
- 访问日志
- 错误日志
- 调试日志

### 5. 安全配置
- JWT密钥
- 加密盐值
- API限流参数

这个目录结构遵循了Go项目的最佳实践，同时考虑了Beego框架的特点，确保了代码的可维护性和扩展性。 