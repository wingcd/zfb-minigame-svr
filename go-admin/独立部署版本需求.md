### 开发要求：

#### 核心技术栈迁移
* 将支付宝小程序云的后端代码改为golang编写
* 框架选择beego，使用ORM，数据库使用MySQL+Redis
* 保持现有MongoDB数据结构，设计MySQL迁移方案和数据转换工具

#### 项目架构设计
* **管理后台服务**：独立的Golang服务，端口8080，提供管理页面的API接口
* **SDK游戏服务**：独立的Golang服务，端口8081，提供游戏SDK相关接口
* **数据库设计**：MySQL作为主数据库，Redis用于缓存和会话管理
* **服务拆分**：确保两个服务可以独立部署和扩展

#### 兼容性要求
* **路由兼容**：不要改变现有的路由路径，可以同时支持新旧两套路由地址
* **接口兼容**：保持现有API的请求参数和响应格式完全一致
* **加密兼容**：不要改变现有的MD5加密验证方式和Token机制
* **SDK兼容**：确保现有SDK和接入的游戏只需修改baseURL即可直接使用
* **管理后台兼容**：现有前端管理页面只需修改API地址即可正常工作

#### 数据迁移方案（暂时不用考虑，数据不重叠）
* **数据库结构映射**：将MongoDB的文档结构合理映射到MySQL表结构
* **迁移工具**：提供数据迁移脚本，支持从MongoDB导出数据并导入MySQL
* **数据完整性**：确保用户数据、排行榜、计数器、邮件等功能数据完整迁移
* **增量同步**：支持增量数据同步，便于平滑迁移

#### 功能模块完整实现
* **用户管理**：用户登录、注册、数据存储（saveData/getData）
* **排行榜系统**：创建排行榜、提交分数、查询排名、重置功能
* **计数器功能**：全局计数器、点位计数器、自动重置机制
* **邮件系统**：创建邮件、发送邮件、领取奖励、批量操作
* **游戏配置**：全局配置、版本配置、动态配置管理
* **管理员系统**：管理员登录、权限管理、操作日志
* **应用管理**：应用创建、配置、统计数据

#### 部署和运维
* **编译脚本**：提供Makefile或build.sh，支持交叉编译
* **配置管理**：使用配置文件管理数据库连接、Redis连接等
* **服务管理**：提供systemd服务文件，支持服务自启动
* **监控日志**：集成日志框架，提供API访问日志和错误日志
* **健康检查**：提供健康检查接口，便于监控和负载均衡

#### 初始化和安装
* **数据库脚本**：提供MySQL数据库初始化SQL文件
* **一键安装页面**：如果检测到未初始化，提供Web界面进行系统初始化
* **环境检查**：检查MySQL、Redis连接，确保环境正常
* **默认数据**：创建默认管理员账户，初始化必要的系统数据

#### 性能和安全
* **接口限流**：实现API访问频率限制，防止恶意请求
* **参数校验**：严格的参数验证，防止SQL注入等安全问题
* **缓存策略**：合理使用Redis缓存，提升接口响应速度
* **连接池**：数据库连接池管理，提升并发处理能力

### 现有项目分析：

#### 技术栈分析
* **后端**：基于支付宝小程序云函数，使用Node.js + @alipay/faas-server-sdk
* **数据库**：MongoDB，使用云数据库服务
* **前端管理**：Vue.js + Vite构建的单页应用
* **SDK**：TypeScript编写，支持小程序和H5游戏接入

#### 核心功能模块
* **用户系统**：支持微信、支付宝等多平台登录
* **数据存储**：玩家数据的保存和读取（JSON格式）
* **排行榜**：多类型排行榜，支持分数提交和查询
* **计数器**：全局计数器，支持多点位和自动重置
* **邮件系统**：游戏内邮件，支持奖励发放
* **游戏配置**：远程配置管理，支持版本配置
* **管理后台**：完整的Web管理界面

#### 数据库结构
* **动态表结构**：每个应用创建独立的用户表（user_${appId}）
* **系统表**：admin_users、admin_roles、admin_operation_logs等
* **功能表**：leaderboard_${appId}、counter_${appId}、mail_${appId}等

### 项目路径：
* **后端代码路径**：../admin-server/AdminServer/cloud/functions/
* **管理页面路径**：../game-web-admin
* **SDK路径**：../zy-sdk

### 交付要求：
* **源码**：完整的Golang源码，包含详细注释
* **文档**：API文档、部署文档、数据迁移文档
* **脚本**：编译脚本、部署脚本、数据库初始化脚本
* **测试**：单元测试覆盖核心功能，集成测试验证接口兼容性